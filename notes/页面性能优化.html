<!DOCTYPE html>
<html lang="en-US" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>页面性能优化 | hamasakin</title>
    <meta name="description" content="A personal blog about programming, web development, and other stuff.">
    <meta name="generator" content="VitePress v1.3.1">
    <link rel="preload stylesheet" href="/assets/style.DWrYT0fk.css" as="style">
    
    <script type="module" src="/assets/app.QFGU2mBw.js"></script>
    <link rel="preload" href="/assets/inter-roman-latin.Di8DUHzh.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="modulepreload" href="/assets/chunks/framework.Bn8BcnVb.js">
    <link rel="modulepreload" href="/assets/chunks/theme.u9uA-q01.js">
    <link rel="modulepreload" href="/assets/notes_页面性能优化.md.C3mlU6Pa.lean.js">
    <script id="check-dark-mode">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"auto",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
    <script id="check-mac-os">document.documentElement.classList.toggle("mac",/Mac|iPhone|iPod|iPad/i.test(navigator.platform));</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-d556f145><!--[--><!--]--><!--[--><span tabindex="-1" data-v-5138b7ea></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-5138b7ea> Skip to content </a><!--]--><!----><header class="VPNav" data-v-d556f145 data-v-6ba776f1><div class="VPNavBar has-sidebar top" data-v-6ba776f1 data-v-610a4c5b><div class="wrapper" data-v-610a4c5b><div class="container" data-v-610a4c5b><div class="title" data-v-610a4c5b><div class="VPNavBarTitle has-sidebar" data-v-610a4c5b data-v-73325661><a class="title" href="/" data-v-73325661><!--[--><!--]--><!----><span data-v-73325661>hamasakin</span><!--[--><!--[--><!--[--><!--[--><img class="custom-nav-bar-title-after" src="https://visitor-badge.laobi.icu/badge?page_id=koitori777" style="margin-left: 10px;"><!--]--><!--]--><!--]--><!--]--></a></div></div><div class="content" data-v-610a4c5b><div class="content-body" data-v-610a4c5b><!--[--><!--]--><div class="VPNavBarSearch search" data-v-610a4c5b><!----></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-610a4c5b data-v-25ec8062><span id="main-nav-aria-label" class="visually-hidden" data-v-25ec8062> Main Navigation </span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/" tabindex="0" data-v-25ec8062 data-v-e981a57a><!--[--><span data-v-e981a57a>导航</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/notes/js-module.html" tabindex="0" data-v-25ec8062 data-v-e981a57a><!--[--><span data-v-e981a57a>笔记</span><!--]--></a><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-25ec8062 data-v-2f542dd8><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-2f542dd8><span class="text" data-v-2f542dd8><!----><span data-v-2f542dd8>踩坑记录</span><span class="vpi-chevron-down text-icon" data-v-2f542dd8></span></span></button><div class="menu" data-v-2f542dd8><div class="VPMenu" data-v-2f542dd8 data-v-ac4c6857><div class="items" data-v-ac4c6857><!--[--><!--[--><div class="VPMenuLink" data-v-ac4c6857 data-v-e65dfd8f><a class="VPLink link" href="/pitfall/vitepress.html" data-v-e65dfd8f><!--[-->vitepress踩坑<!--]--></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-610a4c5b data-v-b9571f62><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title="Switch to dark theme" aria-checked="false" data-v-b9571f62 data-v-5ff48d04 data-v-913714e3><span class="check" data-v-913714e3><span class="icon" data-v-913714e3><!--[--><span class="vpi-sun sun" data-v-5ff48d04></span><span class="vpi-moon moon" data-v-5ff48d04></span><!--]--></span></span></button></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-610a4c5b data-v-60044219 data-v-3e0bdca7><!--[--><a class="VPSocialLink no-icon" href="https://github.com/koitori777" aria-label="github" target="_blank" rel="noopener" data-v-3e0bdca7 data-v-ce272a18><span class="vpi-social-github" /></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-610a4c5b data-v-29c569d0 data-v-2f542dd8><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-2f542dd8><span class="vpi-more-horizontal icon" data-v-2f542dd8></span></button><div class="menu" data-v-2f542dd8><div class="VPMenu" data-v-2f542dd8 data-v-ac4c6857><!----><!--[--><!--[--><!----><div class="group" data-v-29c569d0><div class="item appearance" data-v-29c569d0><p class="label" data-v-29c569d0>Appearance</p><div class="appearance-action" data-v-29c569d0><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title="Switch to dark theme" aria-checked="false" data-v-29c569d0 data-v-5ff48d04 data-v-913714e3><span class="check" data-v-913714e3><span class="icon" data-v-913714e3><!--[--><span class="vpi-sun sun" data-v-5ff48d04></span><span class="vpi-moon moon" data-v-5ff48d04></span><!--]--></span></span></button></div></div></div><div class="group" data-v-29c569d0><div class="item social-links" data-v-29c569d0><div class="VPSocialLinks social-links-list" data-v-29c569d0 data-v-3e0bdca7><!--[--><a class="VPSocialLink no-icon" href="https://github.com/koitori777" aria-label="github" target="_blank" rel="noopener" data-v-3e0bdca7 data-v-ce272a18><span class="vpi-social-github" /></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-610a4c5b data-v-ac71eb56><span class="container" data-v-ac71eb56><span class="top" data-v-ac71eb56></span><span class="middle" data-v-ac71eb56></span><span class="bottom" data-v-ac71eb56></span></span></button></div></div></div></div><div class="divider" data-v-610a4c5b><div class="divider-line" data-v-610a4c5b></div></div></div><!----></header><div class="VPLocalNav has-sidebar empty" data-v-d556f145 data-v-7f391bf0><div class="container" data-v-7f391bf0><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-7f391bf0><span class="vpi-align-left menu-icon" data-v-7f391bf0></span><span class="menu-text" data-v-7f391bf0>Menu</span></button><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-7f391bf0 data-v-abb6b582><button data-v-abb6b582>Return to top</button><!----></div></div></div><aside class="VPSidebar" data-v-d556f145 data-v-3dfd640e><div class="curtain" data-v-3dfd640e></div><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-3dfd640e><span class="visually-hidden" id="sidebar-aria-label" data-v-3dfd640e> Sidebar Navigation </span><!--[--><!--]--><!--[--><div class="no-transition group" data-v-361b0e9c><section class="VPSidebarItem level-0" data-v-361b0e9c data-v-547c3297><div class="item" role="button" tabindex="0" data-v-547c3297><div class="indicator" data-v-547c3297></div><h2 class="text" data-v-547c3297>笔记</h2><!----></div><div class="items" data-v-547c3297><!--[--><div class="VPSidebarItem level-1 is-link" data-v-547c3297 data-v-547c3297><div class="item" data-v-547c3297><div class="indicator" data-v-547c3297></div><a class="VPLink link link" href="/notes/js-module.html" data-v-547c3297><!--[--><p class="text" data-v-547c3297>模块化：符号绑定和值拷贝</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-547c3297 data-v-547c3297><div class="item" data-v-547c3297><div class="indicator" data-v-547c3297></div><a class="VPLink link link" href="/notes/vue2-source-code.html" data-v-547c3297><!--[--><p class="text" data-v-547c3297>Vue2源码解析</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><!--]--><!--[--><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-d556f145 data-v-43f6ea77><div class="VPDoc has-sidebar has-aside" data-v-43f6ea77 data-v-9a0e826f><!--[--><!--]--><div class="container" data-v-9a0e826f><div class="aside" data-v-9a0e826f><div class="aside-curtain" data-v-9a0e826f></div><div class="aside-container" data-v-9a0e826f><div class="aside-content" data-v-9a0e826f><div class="VPDocAside" data-v-9a0e826f data-v-0ebfae4c><!--[--><!--]--><!--[--><!--]--><nav aria-labelledby="doc-outline-aria-label" class="VPDocAsideOutline" data-v-0ebfae4c data-v-d0947cb6><div class="content" data-v-d0947cb6><div class="outline-marker" data-v-d0947cb6></div><div aria-level="2" class="outline-title" id="doc-outline-aria-label" role="heading" data-v-d0947cb6>目录</div><ul class="VPDocOutlineItem root" data-v-d0947cb6 data-v-b7646dfa><!--[--><!--]--></ul></div></nav><!--[--><!--]--><div class="spacer" data-v-0ebfae4c></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-9a0e826f><div class="content-container" data-v-9a0e826f><!--[--><!--]--><main class="main" data-v-9a0e826f><div style="position:relative;" class="vp-doc _notes_%E9%A1%B5%E9%9D%A2%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96" data-v-9a0e826f><div><h1 id="页面性能优化" tabindex="-1">页面性能优化 <a class="header-anchor" href="#页面性能优化" aria-label="Permalink to &quot;页面性能优化&quot;">​</a></h1><h2 id="性能指标" tabindex="-1">性能指标 <a class="header-anchor" href="#性能指标" aria-label="Permalink to &quot;性能指标&quot;">​</a></h2><ul><li>FP 首次渲染时间，浏览器首次开始绘制任何内容</li><li>FCP 首次渲染第一个文本或图像的时间</li><li>LCP 绘制最大内容块的时间</li><li>TTI 用户可以开始与页面交互的时间</li><li>CLS 布局在加载过程的偏移距离，过高时布局会有突然移动的震动现象</li><li>FID 首次输入延迟，用户首次输入到浏览器响应的时间 根据业务场景我们重点关注的性能指标也不同，不过在大多数场景下FP和FCP的优化都是最重要的</li></ul><h2 id="页面渲染方式" tabindex="-1">页面渲染方式 <a class="header-anchor" href="#页面渲染方式" aria-label="Permalink to &quot;页面渲染方式&quot;">​</a></h2><p>客户端渲染<br> 优点：</p><ul><li>前后端分离，开发维护灵活</li><li>用户体验好</li></ul><p>缺点：</p><ul><li>首屏加载慢</li><li>SEO不友好</li><li>复杂度更高</li></ul><p>服务端渲染<br> 优点：</p><ul><li>首屏渲染更快</li><li>SEO效果好</li></ul><p>缺点：</p><ul><li>服务端压力大</li></ul><h2 id="cdn" tabindex="-1">CDN <a class="header-anchor" href="#cdn" aria-label="Permalink to &quot;CDN&quot;">​</a></h2><ul><li>缓存静态资源，降低服务器负担</li><li>使用负载均衡分流</li><li>根据主机就近节点进行内容分发，降低延迟</li><li>不需要传输cookie，提升传输效率</li><li>安全治理，防范DDos等攻击</li></ul><h2 id="网络" tabindex="-1">网络 <a class="header-anchor" href="#网络" aria-label="Permalink to &quot;网络&quot;">​</a></h2><ul><li>启用http2.0</li><li>使用http缓存</li><li>使用gzip</li></ul><h2 id="打包构建" tabindex="-1">打包构建 <a class="header-anchor" href="#打包构建" aria-label="Permalink to &quot;打包构建&quot;">​</a></h2><ul><li>压缩JS/CSS</li><li>去除冗余css</li><li>按需加载</li><li>异步或者延迟加载js</li><li>code splitting分割代码块 <ul><li>对于三方库一般不会经常变更，打包成单独文件长期使用缓存</li></ul></li><li>tree shaking</li><li>图片 <ul><li>尽量使用懒加载</li><li>使用data-url处理小图</li><li>使用字体图标</li><li>使用webp格式图片</li><li>使用svg替代位图</li><li>图片压缩</li><li>http1.1可以使用雪碧图减少请求数</li></ul></li></ul><h2 id="代码" tabindex="-1">代码 <a class="header-anchor" href="#代码" aria-label="Permalink to &quot;代码&quot;">​</a></h2><ul><li>js <ul><li>减少重排 <ul><li>缓存DOM计算属性</li></ul></li><li>长任务 <ul><li>不涉及DOM操作使用web worker</li><li>分片处理，拆分成子任务构建任务队列</li></ul></li><li>高频事件（resize、scroll、touchmove、wheel） <ul><li>使用节流防抖</li><li>调用requestAnimationFrame</li></ul></li><li>使用事件委托</li><li>接口返回慢 <ul><li>预加载接口</li></ul></li><li>接口数据如果很少变更且高频调用可以采用数据持久化方案</li></ul></li><li>css <ul><li>降低css选择器复杂度</li><li>使用过渡代替动画</li><li>启用合成层，强制开启GPU加速</li></ul></li><li>vue <ul><li>合理使用异步组件</li><li>使用keep-alive缓存组件</li><li>使用vuex或pinia缓存接口数据</li><li>使用计算属性缓存替换方法</li><li>使用函数式组件</li><li>合理选择v-if、v-show <ul><li>v-if首次加载更快，但是每次切换都会重新初始化组件，后续切换时渲染较慢</li><li>v-show首次就会加载所有分支组件，切换时只会重新渲染，不会更新组件</li></ul></li><li>复杂页面渲染卡顿 <ul><li>延迟加载组件，渐进式渲染，通过requsetFrameAnimation实现</li></ul></li><li>大数据场景，非必要时使用普通对象替换响应式数据，提升效率</li></ul></li></ul></div></div></main><footer class="VPDocFooter" data-v-9a0e826f data-v-a799cc6b><!--[--><!--]--><!----><nav class="prev-next" aria-labelledby="doc-footer-aria-label" data-v-a799cc6b><span class="visually-hidden" id="doc-footer-aria-label" data-v-a799cc6b>Pager</span><div class="pager" data-v-a799cc6b><!----></div><div class="pager" data-v-a799cc6b><a class="VPLink link pager-link next" href="/notes/js-module.html" data-v-a799cc6b><!--[--><span class="desc" data-v-a799cc6b>Next page</span><span class="title" data-v-a799cc6b>模块化：符号绑定和值拷贝</span><!--]--></a></div></nav></footer><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><!----><!--[--><!--]--></div></div>
    <script>window.__VP_HASH_MAP__=JSON.parse("{\"index.md\":\"vGipK6ff\",\"interview_wxg.md\":\"BkwCZPNX\",\"notes_http1.0 __3.0的变化.md\":\"BNq4Ahwc\",\"notes_https加密过程.md\":\"BPXLC2rs\",\"notes_js-module.md\":\"Bj5MP1EY\",\"notes_vue2-source-code.md\":\"CFfDGPUE\",\"notes_页面性能优化.md\":\"C3mlU6Pa\",\"pitfall_vitepress.md\":\"DU3tj03h\"}");window.__VP_SITE_DATA__=JSON.parse("{\"lang\":\"en-US\",\"dir\":\"ltr\",\"title\":\"hamasakin\",\"description\":\"A personal blog about programming, web development, and other stuff.\",\"base\":\"/\",\"head\":[],\"router\":{\"prefetchLinks\":true},\"appearance\":true,\"themeConfig\":{\"nav\":[{\"text\":\"导航\",\"link\":\"/\"},{\"text\":\"笔记\",\"link\":\"/notes/js-module\"},{\"text\":\"踩坑记录\",\"items\":[{\"text\":\"vitepress踩坑\",\"link\":\"/pitfall/vitepress\"}]}],\"socialLinks\":[{\"icon\":\"github\",\"link\":\"https://github.com/koitori777\"}],\"outline\":{\"label\":\"目录\"},\"sidebar\":{\"/notes/\":[{\"text\":\"笔记\",\"items\":[{\"text\":\"模块化：符号绑定和值拷贝\",\"link\":\"/notes/js-module\"},{\"text\":\"Vue2源码解析\",\"link\":\"/notes/vue2-source-code\"}]}],\"/pitfall/\":[{\"text\":\"踩坑记录\",\"items\":[{\"text\":\"vitepress踩坑\",\"link\":\"/pitfall/vitepress\"}]}]}},\"locales\":{},\"scrollOffset\":134,\"cleanUrls\":false}");</script>
    
  </body>
</html>